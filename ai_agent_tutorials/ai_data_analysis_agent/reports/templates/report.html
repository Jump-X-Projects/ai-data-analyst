<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Data Analysis Report</title>
    <link rel="stylesheet" href="{{ css_path }}">
    <style>
        /* Ensure proper rendering of Jump gradient arc */
        .gradient-arc {
            position: absolute;
            top: 0;
            right: 0;
            width: 150px;
            height: 80px;
            background: linear-gradient(90deg, 
                var(--yellow) 0%, 
                var(--peach) 25%, 
                var(--pink) 50%, 
                var(--blue) 75%, 
                var(--green) 100%
            );
            border-radius: 0 0 0 100%;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <!-- Cover Page -->
    <div class="cover">
        <div class="gradient-arc"></div>
        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjgwIiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8cGF0aCBkPSJNNDAgMjBINjBWNjBINDBWMjBaIiBmaWxsPSIjRkZGRkZGIi8+DQogIDxwYXRoIGQ9Ik04MCAyMEgxMDBWNjBIODBWMjBaIiBmaWxsPSIjRkZGRkZGIi8+DQogIDxwYXRoIGQ9Ik0xMjAgMjBIMTQwVjYwSDEyMFYyMFoiIGZpbGw9IiNGRkZGRkYiLz4NCiAgPHBhdGggZD0iTTE2MCAyMEgxODBWNjBIMTYwVjIwWiIgZmlsbD0iI0ZGRkZGRiIvPg0KICA8cGF0aCBkPSJNMjAgMjBIMTgwQzE5MC41IDIwIDE5OSAyOC41IDE5OSAzOVY0MUMxOTkgNTEuNSAxOTAuNSA2MCAxODAgNjBIMjBDOS41IDYwIDEgNTEuNSAxIDQxVjM5QzEgMjguNSA5LjUgMjAgMjAgMjBaIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMiIvPg0KPC9zdmc+" alt="Jump Logo" class="logo">
        <h1>Data Analysis Report</h1>
        <p class="timestamp">Generated on {{ timestamp }}</p>
        <div class="query-info">
            <h3>Query</h3>
            <p>{{ query_text }}</p>
        </div>
    </div>

    <!-- Page Break -->
    <div class="page-break"></div>

    <!-- Executive Summary -->
    <div class="section no-break">
        <h2>Executive Summary</h2>
        <div class="executive-summary">
            {{ analysis_text }}
        </div>
    </div>

    <!-- Page Break -->
    <div class="page-break"></div>

    <!-- Visualization Section -->
    {% if visualization_path %}
    <div class="section no-break">
        <h2>Data Visualization</h2>
        <div class="visualization">
            <img src="file://{{ visualization_path }}" alt="Data Visualization" style="max-width: 100%; height: auto; display: block; margin: 0 auto;">
            {% if viz_suggestion %}
            <div class="viz-info">
                <h3>Visualization Type: {{ viz_suggestion.type }}</h3>
                <p>{{ viz_suggestion.reason }}</p>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Page Break -->
    <div class="page-break"></div>

    <!-- Data Results -->
    <div class="section">
        <h2>Query Results</h2>
        <table class="data-table">
            <thead>
                <tr>
                    {% for column in data_columns %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in data_rows %}
                <tr>
                    {% for value in row %}
                    <td>{{ value }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Technical Details -->
    <div class="section no-break">
        <h2>Technical Details</h2>
        <h3>SQL Query</h3>
        <div class="sql-query">
            {{ sql_query }}
        </div>
        <div class="query-metadata">
            <p>Execution Time: {{ execution_time }}</p>
            <p>Rows Processed: {{ row_count }}</p>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        Generated by Jump Data Analyst
    </div>
</body>
</html>
